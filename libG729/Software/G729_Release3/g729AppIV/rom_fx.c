/*
 --------------------------------------------------------------------------
 ITU-T G.720.1 Source Code
 Software Release 1.0a (2010-03)
 (C) 2009 Huawei Technologies Co., LTD. 
 --------------------------------------------------------------------------
*/
/* 
   ITU-T G.729 Appendix IV - Reference C code for fixed-point implementation          
   Version 1.0

   Copyright (c) 2012,
   Huawei Technologies
*/

#include "typedef.h"
#include "constdef_fx.h"


Word16 band_tbl_16k[NUM_BAND*2] =
{
	2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 26,
	27, 36, 37, 48, 49, 62, 63, 78, 79, 96, 97,127	
};

Word16 band_tbl_8k[NUM_BAND*2] =
{
	2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 19, 20, 22, 23, 26,
    27, 30, 31, 35, 36, 41, 42, 48, 49, 55, 56, 63
};

Word16 vad_thr_tbl_8k_fx[4][3][3] = 
{
	{{384, 128, 640}, {576, 416, 800}, {352, 280, 640}},
    {{576, 304, 800}, {640, 416, 864}, {480, 336, 960}},
    {{736, 480, 1056}, {800, 544, 1120}, {832, 576, 1408}},
    {{320, 320, 320}, {320, 320, 320}, {320, 320, 320}}
};

Word16 vad_thr_tbl_16k_fx[4][3][3] = 
{
	{{352, 160, 576}, {544, 512, 864}, {544, 416, 608}},
    {{544, 304, 800}, {576, 384, 864}, {608, 384, 960}},
    {{736, 480, 1056}, {800, 544, 1056}, {832, 576, 1408}},
    {{320, 320, 320}, {320, 320, 320}, {320, 320, 320}}
};

Word16 burst_thr_tbl_fx[3][4][2] =             
{
	{{(Word16)1120, (Word16)3200}, 
    {(Word16)2240, (Word16)4160},  
    {(Word16)5760, (Word16)5760}, 
    {(Word16)5760, (Word16)5760}},
    {{(Word16)1120, (Word16)1600}, 
    {(Word16)2240, (Word16)2240}, 
    {(Word16)5760, (Word16)5760}, 
    {(Word16)5760, (Word16)4800}},
    {{(Word16)1120, (Word16)4800}, 
    {(Word16)2240, (Word16)5760}, 
    {(Word16)5760, (Word16)5760}, 
    {(Word16)5760, (Word16)7360}}
};

Word16 hang_sp_tbl_fx[3][4][2] =                            
{
    {{21, 8}, {7, 7}, {1, 0}, {1, 1}}, 
	{{22, 9}, {7, 7}, {1, 0}, {1, 1}}, 
	{{21, 7}, {7, 5}, {0, 0}, {1, 1}}
};

Word16 Sqrt_Taylor_coeff_fx[6] = {16384, -4096, 2048, -1280, 896, -672};

Word16 Sqrt_exp_factor_fx[14] = 
{
	23170, 16384, 11585, 8192, 5793, 4096, 2896, 
	2048, 1448, 1024, 724, 512, 362, 256
};

Word16 log10_Taylor_coeff_fx[6] = {32767, -16384, 10923, -8192, 6553, -5461};

Word16 log10_exp_factor_fx[15] = 
{
	1233, 2466, 3699, 4932, 6165, 7398, 8631, 9864, 
	11097, 12330, 13563, 14796, 16029, 17262, 18495
}; 

Word16 log10_exp_factor_internal_fx[16] = 
{
	0, 1233, 2466, 3699, 4932, 6165, 7398, 8631, 9864, 
	11097, 12330, 13563, 14796, 16029, 17262,18495
}; 

Word16 ssnr_seg_len[16] = 
{
	6554, 6554, 8192, 8192, 8192, 8192, 5461, 5461, 
    5461, 4096, 4096, 3277, 2731, 2341, 2341, 2048
};

Word16 ssnr_seg_len_8k[16] = 
{
	16384, 16384, 16384, 16384, 16384, 16384, 
	10923, 10923, 10923, 8192, 8192,
    6554, 5461, 4681, 4681, 4096
};

Word16 Sqrt_exp_factor_32bit_fx[31] = 
{
	32767, 23170, 16384, 11585, 8192, 5793, 4096, 2896, 2048, 1448, 1024, 724, 
    512, 362, 256, 181, 128, 91, 64, 45, 32, 23, 16, 11, 8, 6, 4, 3, 2, 1, 1
};

Word16 window_16k_fx[FFTSIZE16k] = 
{
	2621,  2628,  2635,  2648,  2661,  2680,  2700,  2723,  2749,  2782,  2815, 
    2851,  2890,  2933,  2979,  3028,  3080,  3136,  3195,  3254,  3319,  3385, 
	3457,  3529,  3608,  3686,  3768,  3853,  3942,  4034,  4129,  4228,  4325, 
	4427,  4532,  4640,  4751,  4866,  4981,  5102,  5223,  5348,  5475,  5603, 
	5738,  5872,  6010,  6147,  6291,  6435,  6583,  6730,  6881,  7035,  7192, 
	7350,  7510,  7674,  7838,  8005,  8175,  8346,  8519,  8693,  8870,  9050, 
	9231,  9411,  9594,  9781,  9968,  10158, 10348, 10541, 10734, 10931, 11128, 
	11324, 11524, 11724, 11927, 12130, 12333, 12540, 12746, 12953, 13163, 13372, 
	13582, 13792, 14005, 14218, 14431, 14647, 14860, 15076, 15292, 15509, 15728, 
	15944, 16161, 16380, 16600, 16819, 17036, 17255, 17475, 17694, 17914, 18133, 
	18353, 18569, 18789, 19008, 19228, 19444, 19660, 19880, 20096, 20312, 20529, 
	20742, 20958, 21171, 21384, 21597, 21806, 22016, 22226, 22436, 22642, 22848, 
	23055, 23258, 23461, 23664, 23864, 24064, 24261, 24457, 24654, 24847, 25041, 
	25231, 25421, 25607, 25794, 25978, 26158, 26338, 26518, 26695, 26869, 27043, 
	27213, 27383, 27550, 27714, 27878, 28039, 28196, 28353, 28507, 28658, 28805, 
	28953, 29097, 29241, 29379, 29517, 29651, 29785, 29913, 30041, 30165, 30287, 
	30408, 30522, 30637, 30749, 30857, 30962, 31063, 31165, 31260, 31355, 31446, 
	31535, 31620, 31702, 31781, 31859, 31931, 32004, 32069, 32135, 32194, 32253, 
	32308, 32361, 32410, 32456, 32498, 32538, 32574, 32606, 32639, 32665, 32688, 
	32708, 32728, 32741, 32754, 32760, 32767, 32767, 32747, 32688, 32587, 32449, 
	32269, 32049, 31794, 31499, 31165, 30791, 30382, 29933, 29451, 28930, 28376, 
	27786, 27164, 26509, 25820, 25100, 24349, 23569, 22763, 21924, 21063, 20175, 
	19260, 18323, 17363, 16384, 15384, 14365, 13326, 12275, 11206, 10125, 9031 , 
	7926 , 6812 , 5688 
}; 

Word16 FFT_phs_tbl_128_fx[128] = 
{
32767, 0, 32729, -1608, 32610, -3212, 32413, -4808, 
32138, -6393, 31786, -7962, 31357, -9512, 30853, -11039, 
30274, -12540, 29622, -14010, 28899, -15447, 28106, -16846, 
27246, -18205, 26320, -19520, 25330, -20788, 24279, -22006, 
23170, -23170, 22006, -24279, 20788, -25330, 19520, -26320, 
18205, -27246, 16846, -28106, 15447, -28899, 14010, -29622, 
12540, -30274, 11039, -30853, 9512, -31357, 7962, -31786, 
6393, -32138, 4808, -32413, 3212, -32610, 1608, -32729, 
0, -32768, -1608, -32729, -3212, -32610, -4808, -32413, 
-6393, -32138, -7962, -31786, -9512, -31357, -11039, -30853, 
-12540, -30274, -14010, -29622, -15447, -28899, -16846, -28106, 
-18205, -27246, -19520, -26320, -20788, -25330, -22006, -24279, 
-23170, -23170, -24279, -22006, -25330, -20788, -26320, -19520, 
-27246, -18205, -28106, -16846, -28899, -15447, -29622, -14010, 
-30274, -12540, -30853, -11039, -31357, -9512, -31786, -7962, 
-32138, -6393, -32413, -4808, -32610, -3212, -32729, -1608
};

Word16 FFT_phs_tbl_256_fx[256] = {
32767, 0, 32758, -804, 32729, -1608, 32679, -2411, 
32610, -3212, 32522, -4011, 32413, -4808, 32286, -5602, 
32138, -6393, 31972, -7180, 31786, -7962, 31581, -8740, 
31357, -9512, 31114, -10279, 30853, -11039, 30572, -11793, 
30274, -12540, 29957, -13279, 29622, -14010, 29269, -14733, 
28899, -15447, 28511, -16151, 28106, -16846, 27684, -17531, 
27246, -18205, 26791, -18868, 26320, -19520, 25833, -20160, 
25330, -20788, 24812, -21403, 24279, -22006, 23732, -22595, 
23170, -23170, 22595, -23732, 22006, -24279, 21403, -24812, 
20788, -25330, 20160, -25833, 19520, -26320, 18868, -26791, 
18205, -27246, 17531, -27684, 16846, -28106, 16151, -28511, 
15447, -28899, 14733, -29269, 14010, -29622, 13279, -29957, 
12540, -30274, 11793, -30572, 11039, -30853, 10279, -31114, 
9512, -31357, 8740, -31581, 7962, -31786, 7180, -31972, 
6393, -32138, 5602, -32286, 4808, -32413, 4011, -32522, 
3212, -32610, 2411, -32679, 1608, -32729, 804, -32758, 
0, -32768, -804, -32758, -1608, -32729, -2411, -32679, 
-3212, -32610, -4011, -32522, -4808, -32413, -5602, -32286, 
-6393, -32138, -7180, -31972, -7962, -31786, -8740, -31581, 
-9512, -31357, -10279, -31114, -11039, -30853, -11793, -30572, 
-12540, -30274, -13279, -29957, -14010, -29622, -14733, -29269, 
-15447, -28899, -16151, -28511, -16846, -28106, -17531, -27684, 
-18205, -27246, -18868, -26791, -19520, -26320, -20160, -25833, 
-20788, -25330, -21403, -24812, -22006, -24279, -22595, -23732, 
-23170, -23170, -23732, -22595, -24279, -22006, -24812, -21403, 
-25330, -20788, -25833, -20160, -26320, -19520, -26791, -18868, 
-27246, -18205, -27684, -17531, -28106, -16846, -28511, -16151, 
-28899, -15447, -29269, -14733, -29622, -14010, -29957, -13279, 
-30274, -12540, -30572, -11793, -30853, -11039, -31114, -10279, 
-31357, -9512, -31581, -8740, -31786, -7962, -31972, -7180, 
-32138, -6393, -32286, -5602, -32413, -4808, -32522, -4011, 
-32610, -3212, -32679, -2411, -32729, -1608, -32758, -804
}; 

Word16 FFT_i_table_128_fx[28] = 
{
	2, 4, 6, 8, 10, 12, 14, 18, 20, 22, 26, 28, 30, 34, 38, 
	42, 44, 46, 50, 54, 58, 62, 70, 74, 78, 86, 94, 110
};

Word16 FFT_j_table_128_fx[28] = 
{
	64, 32, 96, 16, 80, 48, 112, 72, 40, 104, 88, 
	56, 120, 68, 100, 84, 52, 116, 76, 108, 92, 
	124, 98, 82, 114, 106, 122, 118
};

Word16 FFT_i_table_256_fx[56] = 
{
	2, 4, 6, 8, 10, 12, 14, 18, 20, 22, 24, 26, 28, 
	30, 34, 36, 38, 42, 44, 46, 50, 52, 54, 58, 60, 
	62, 66, 70, 74, 76, 78, 82, 86, 90, 92, 94, 98, 
	102, 106, 110, 114, 118, 122, 126, 134, 138, 
	142, 150, 154, 158, 166, 174, 182, 190, 206, 222
};

Word16 FFT_j_table_256_fx[56] = 
{
	128, 64, 192, 32, 160, 96, 224, 144, 80, 208, 48, 176, 
	112, 240, 136, 72, 200, 168, 104, 232, 152, 88, 216, 
    184, 120, 248, 132, 196, 164, 100, 228, 148, 212, 180, 
	116, 244, 140, 204, 172, 236, 156, 220, 188, 252, 194, 
	162, 226, 210, 178, 242, 202, 234, 218, 250, 230, 246
};

Word16 Inv_len[5] = {0x7FFF, 0x4000, 0x2AAB, 0x2000, 0x199A}; 
